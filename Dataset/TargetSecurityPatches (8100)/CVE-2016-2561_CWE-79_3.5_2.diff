37c34d089aa19f30d11203bb0c7f85b486424372
phpmyadmin@@phpmyadmin
diff --git a/js/functions.js b/js/functions.js
index 13b81468d66..b6a46a39c2a 100644
--- a/js/functions.js
+++ b/js/functions.js
@@ -243,6 +243,24 @@ function escapeHtml(unsafe) {
     }
 }
 
+function escapeJsString(unsafe) {
+    if (typeof(unsafe) != 'undefined') {
+        return unsafe
+            .toString()
+            .replace("\000", '')
+            .replace('\\', '\\\\')
+            .replace('\'', '\\\'')
+            .replace("'", "\\\'")
+            .replace('"', '\"')
+            .replace(""", "\"")
+            .replace("\n", '\n')
+            .replace("\r", '\r')
+            .replace(/<\/script/gi, '';
             $("#newCols").html(confirmStr);
             $('.tblFooters').html('' +
-                '');
+                '');
         }
     });
     $("#mainContent p").on("click", "#createPrimaryKey", function(event) {
