febb89ab823d0bd6246c6cf460addabb6d7a01d4
humhub@@humhub
diff --git a/protected/extensions/CmsInput.php b/protected/extensions/CmsInput.php
index a17ac7d40b..f9b795dd39 100644
--- a/protected/extensions/CmsInput.php
+++ b/protected/extensions/CmsInput.php
@@ -164,7 +164,7 @@ public function cleanEncode($str)
      */
     public function stripClean($str)
     {
-        return $this->xssClean($this->stripTags($str));
+        return $this->stripTags($this->xssClean($str));
     }
     
     /**
diff --git a/protected/modules_core/admin/controllers/LoggingController.php b/protected/modules_core/admin/controllers/LoggingController.php
index bb2790ad9c..1942e4c288 100644
--- a/protected/modules_core/admin/controllers/LoggingController.php
+++ b/protected/modules_core/admin/controllers/LoggingController.php
@@ -82,4 +82,11 @@ public function actionIndex()
         ));
     }
 
+    public function actionFlush()
+    {
+        $this->forcePostRequest();
+        Logging::model()->deleteAll();
+        $this->redirect($this->createUrl('index'));
+    }
+
 }
diff --git a/protected/modules_core/admin/views/logging/index.php b/protected/modules_core/admin/views/logging/index.php
index 8583a2491f..9584a63d44 100644
--- a/protected/modules_core/admin/views/logging/index.php
+++ b/protected/modules_core/admin/views/logging/index.php
@@ -2,13 +2,16 @@
     Error logging'); ?>

 
+        
         
 $itemCount)); ?>
-             $pageSize)); ?>
+            
+             $pageSize)); ?>


+        
+        
 
         

@@ -28,17 +31,21 @@ class="pull-right">

-                            level; ?> 
+                            level); ?> 
                             logtime); ?> 
-                            category; ?>
+                            category); ?>

-                        message; ?>
+                        message); ?>
                     



 
+        
+            'btn btn-danger')); ?>
+        
+    
 
         
request->getParam('from');
+        $lastEntryId = (int) Yii::app()->request->getParam('from');
 
         // create database query
         $criteria = new CDbCriteria();
         if ($lastEntryId > 0) {
             // start from last entry id loaded
-            $criteria->condition = 'id<' . $lastEntryId;
+            $criteria->condition = 'id<:lastEntryId';
+            $criteria->params = array(':lastEntryId' => $lastEntryId);
         }
         $criteria->order = 'seen ASC, created_at DESC';
         $criteria->limit = 6;
