b15cf19e9e01115f653c76ffdc8f54cd97566553
openSUSE@@open-build-service
diff --git a/src/api/app/models/review.rb b/src/api/app/models/review.rb
index ebef34e51c2..dcfcb158e50 100644
--- a/src/api/app/models/review.rb
+++ b/src/api/app/models/review.rb
@@ -133,8 +133,8 @@ def check_initial
   def self.new_from_xml_hash(hash)
     r = Review.new
 
-    r.state = hash.delete('state') { raise ArgumentError, 'no state' }
-    r.state = r.state.to_sym
+    r.state = :new
+    hash.delete('state')
 
     r.by_user = hash.delete('by_user')
     r.by_group = hash.delete('by_group')
diff --git a/src/api/spec/models/review_spec.rb b/src/api/spec/models/review_spec.rb
index aca2b19f3c5..838c6f9d382 100644
--- a/src/api/spec/models/review_spec.rb
+++ b/src/api/spec/models/review_spec.rb
@@ -427,4 +427,20 @@
       expect(review_by_package.reviewable_by?(by_package: other_package.name)).to be_falsy
     end
   end
+
+  describe '.new_from_xml_hash' do
+    let(:request_xml) do
+      "
+        
+      "
+    end
+    let(:request_hash) { Xmlhash.parse(request_xml) }
+    let(:review_hash) { request_hash['review'] }
+
+    subject { Review.new_from_xml_hash(review_hash) }
+
+    it 'initalizes the review in state :new' do
+      expect(subject.state).to eq(:new)
+    end
+  end
 end
diff --git a/src/api/test/unit/bs_request_test.rb b/src/api/test/unit/bs_request_test.rb
index 14e8521be6e..f90654c3357 100644
--- a/src/api/test/unit/bs_request_test.rb
+++ b/src/api/test/unit/bs_request_test.rb
@@ -125,7 +125,32 @@ def test_parse_bigger
     assert_equal 1027, req.number
 
     newxml = req.render_xml
-    assert_equal xml, newxml
+    expected = <<-XML.strip_heredoc
+      
+        
+          
+          
+          
+            cleanup
+          
+          
+        
+        critical
+        
+          No comment
+        
+        
+        
+        
+          review1
+        
+        
+          please accept
+        
+        Left blank
+      
+    XML
+    assert_equal expected, newxml
 
     wi = req.webui_infos(diffs: false)
     # iggy is *not* target maintainer
