0ad646c81b2182f7fa67ec0c8c825e0ee165696d
torvalds@@linux
diff --git a/drivers/net/tun.c b/drivers/net/tun.c
index e21bf90b819f8f..b9973fb868b79d 100644
--- a/drivers/net/tun.c
+++ b/drivers/net/tun.c
@@ -2028,7 +2028,7 @@ static int tun_set_iff(struct net *net, struct file *file, struct ifreq *ifr)
 		if (!dev)
 			return -ENOMEM;
 		err = dev_get_valid_name(net, dev, name);
-		if (err)
+		if (err < 0)
 			goto err_free_dev;
 
 		dev_net_set(dev, net);
