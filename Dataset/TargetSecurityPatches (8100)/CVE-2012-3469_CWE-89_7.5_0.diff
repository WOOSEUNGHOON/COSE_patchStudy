a11d43c
ushahidi@@Ushahidi_Web
diff --git a/application/libraries/api/MY_Checkin_Api_Object.php b/application/libraries/api/MY_Checkin_Api_Object.php
index 49b60d122d..aabcd93408 100644
--- a/application/libraries/api/MY_Checkin_Api_Object.php
+++ b/application/libraries/api/MY_Checkin_Api_Object.php
@@ -377,8 +377,8 @@ public function register_checkin($mobileid,$lat,$lon,$message=FALSE,$firstname=F
 			
 			// Check if email exists
 			
-			$query = 'SELECT id FROM '.$this->table_prefix.'users WHERE `email` = \''.$user_email.'\' LIMIT 1;';
-			$usercheck = $this->db->query($query);
+			$query = 'SELECT id FROM `'.$this->table_prefix.'users` WHERE `email` = ? LIMIT 1;';
+			$usercheck = $this->db->query($query, $user_email);
 			
 			if ( isset($usercheck[0]->id) )
 			{
