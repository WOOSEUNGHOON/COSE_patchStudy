0fadc3e592d84bc9dfe9e0403f8bd6e3c7d8427f
openemr@@openemr
diff --git a/interface/orders/patient_match_dialog.php b/interface/orders/patient_match_dialog.php
index 85a96126920..f5f06fbc656 100644
--- a/interface/orders/patient_match_dialog.php
+++ b/interface/orders/patient_match_dialog.php
@@ -52,7 +52,7 @@ function myRestoreSession() {
 
     function openPatient(ptid) {
         var f = opener.document.forms[0];
-        var ename = '';
+        var ename = ;
         if (f[ename]) {
             f[ename].value = ptid;
             window.close();
diff --git a/interface/patient_file/report/patient_report.php b/interface/patient_file/report/patient_report.php
index fed7fcd533f..c87167cef03 100644
--- a/interface/patient_file/report/patient_report.php
+++ b/interface/patient_file/report/patient_report.php
@@ -329,7 +329,7 @@ function show_date_fun(){
                                                 echo attr($ierow['encounter']) . "/";
                                             }
 
-                                            echo "' />$disptitle\n";
+                                            echo "' />" . text($disptitle) . "\n";
                                             echo "     " . text($prow['begdate']);
 
                                             if ($prow['enddate']) {
diff --git a/interface/usergroup/mfa_registrations.php b/interface/usergroup/mfa_registrations.php
index 87f386fc13a..19b98830987 100644
--- a/interface/usergroup/mfa_registrations.php
+++ b/interface/usergroup/mfa_registrations.php
@@ -136,7 +136,7 @@ function addclick(sel) {
                     


-                            
+                            


  
@@ -165,7 +165,7 @@ function addclick(sel) {
                     


-                            
+                            



diff --git a/interface/usergroup/mfa_totp.php b/interface/usergroup/mfa_totp.php
index 92b8c3dfa80..81bc932a2b5 100644
--- a/interface/usergroup/mfa_totp.php
+++ b/interface/usergroup/mfa_totp.php
@@ -109,7 +109,7 @@ function docancel() {
                             ?>
                             

-                                    
+                                    



@@ -170,7 +170,7 @@ function docancel() {
                             }
                             ?>
                             
-                                
+                                



diff --git a/interface/usergroup/mfa_u2f.php b/interface/usergroup/mfa_u2f.php
index 262707a53ca..9989e5aeecf 100644
--- a/interface/usergroup/mfa_u2f.php
+++ b/interface/usergroup/mfa_u2f.php
@@ -101,7 +101,7 @@ function docancel() {
         


-                    
+                    

:
                             
diff --git a/interface/usergroup/usergroup_admin.php b/interface/usergroup/usergroup_admin.php
index debb1d2bbe9..feb4936b008 100644
--- a/interface/usergroup/usergroup_admin.php
+++ b/interface/usergroup/usergroup_admin.php
@@ -277,12 +277,10 @@
         $calvar = (!empty($_POST["calendar"])) ? 1 : 0;
         $portalvar = (!empty($_POST["portal_user"])) ? 1 : 0;
 
-        $res = sqlStatement("select distinct username from users where username != ''");
+        $res = sqlQuery("select username from users where username = ?", [trim($_POST['rumple'])]);
         $doit = true;
-        while ($row = sqlFetchArray($res)) {
-            if ($doit == true && $row['username'] == trim($_POST['rumple'])) {
-                $doit = false;
-            }
+        if (!empty($res['username'])) {
+            $doit = false;
         }
 
         if ($doit == true) {
