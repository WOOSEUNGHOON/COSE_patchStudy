94cbfab74c9fd6d04492597a1a684674c3c0e30f
baserproject@@basercms
diff --git a/app/webroot/theme/admin-third/Elements/admin/toolbar.php b/app/webroot/theme/admin-third/Elements/admin/toolbar.php
index 53a53ca8ba..1390108d30 100755
--- a/app/webroot/theme/admin-third/Elements/admin/toolbar.php
+++ b/app/webroot/theme/admin-third/Elements/admin/toolbar.php
@@ -39,52 +39,54 @@
 


-			name == 'Installations'): ?>
+			
+			name == 'Installations'): ?>
 				BcBaser->link(
 						$this->BcBaser->getImg('admin/logo_icon.svg', ['alt' => '', 'width' => '24', 'height' => '21', 'class' => 'bca-toolbar__logo-symbol']) . 
 				        '' . __d('baser', 'インストールマニュアル') . '', 
-                        'https://basercms.net/manuals/introductions/4.html', ['target' => '_blank', 'class' => 'bca-toolbar__logo-link']) ?>
-			
+						'https://basercms.net/manuals/introductions/4.html',
+						['target' => '_blank', 'class' => 'bca-toolbar__logo-link']
+				) ?>
+						
+			
+			
BcBaser->link(
 						$this->BcBaser->getImg('admin/logo_icon.svg', ['alt' => '', 'width' => '24', 'height' => '21', 'class' => 'bca-toolbar__logo-symbol']) .
 						'' . __d('baser', 'アップデートマニュアル') . '', 
-                        'https://basercms.net/manuals/introductions/8.html', ['target' => '_blank', 'class' => 'bca-toolbar__logo-link']) ?>
-			request->params['admin']) || ('/' . $this->request->url) == $loginUrl): ?>
+						'https://basercms.net/manuals/introductions/8.html',
+						['target' => '_blank', 'class' => 'bca-toolbar__logo-link']
+				) ?>
+						
+			
+			request->params['admin']) || ('/' . $this->request->url) == $loginUrl): ?>
 				BcBaser->link(
 						$this->BcBaser->getImg('admin/logo_icon.svg', ['alt' => '', 'width' => '24', 'height' => '21', 'class' => 'bca-toolbar__logo-symbol'])
-							.''
-							.$this->BcBaser->siteConfig['formal_name']
-							.'', '/'
+							. ''
+							. h($this->BcBaser->siteConfig['formal_name'])
+							. '', '/'
 						,
 						['class' => 'bca-toolbar__logo-link']
 					)
 				?>
-			
-				
+				
+			
+			
+				
+				
BcBaser->link(
 						$this->BcBaser->getImg('admin/logo_icon.svg', ['alt' => '', 'width' => '24', 'height' => '21', 'class' => 'bca-toolbar__logo-symbol'])
-							.''
-							.$this->BcBaser->siteConfig['formal_name']
-							.'', ['plugin' => null, 'admin' => true, 'controller' => 'dashboard', 'action' => 'index']
+							. ''
+							. h($this->BcBaser->siteConfig['formal_name'])
+							. '', ['plugin' => null, 'admin' => true, 'controller' => 'dashboard', 'action' => 'index']
 						,
 						['class' => 'bca-toolbar__logo-link']
 					)
 					?>
-				
-					BcBaser->link($authName, Configure::read('BcAuthPrefix.' . $currentPrefix . '.loginRedirect'), ['title' => $authName]) ?>
+				
+				
+					BcBaser->link(h($authName), Configure::read('BcAuthPrefix.' . $currentPrefix . '.loginRedirect'), ['title' => h($authName)]) ?>
 				


@@ -112,14 +114,16 @@
 		


-				# 
-				#	
-				#		BcBaser->element('favorite_menu') ? >
-				#		BcBaser->element('permission') ? >
-				#	
-				#
+				/**
+				 * TODO: お気に入りを表示（サイドメニューとのイベント処理・同期・スタイルの調整を検討中）
+				 * 
+				 * 
+				 * 	
+				 * 		BcBaser->element('favorite_menu') ? >
+				 * 		BcBaser->element('permission') ? >
+				 * 	
+				 * 
+				 */
 				?>
 				

diff --git a/lib/Baser/View/Elements/admin/toolbar.php b/lib/Baser/View/Elements/admin/toolbar.php
index a3827e8823..85c2cf4a63 100755
--- a/lib/Baser/View/Elements/admin/toolbar.php
+++ b/lib/Baser/View/Elements/admin/toolbar.php
@@ -47,12 +47,12 @@
 				
BcBaser->link(__d('baser', 'アップデートマニュアル'), 'http://wiki.basercms.net/%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%A2%E3%83%83%E3%83%97%E3%82%AC%E3%82%A4%E3%83%89', ['target' => '_blank', 'class' => 'tool-menu']) ?>
request->params['admin']) || ('/' . $this->request->url) == $loginUrl): ?>	
-					BcBaser->link($this->BcBaser->siteConfig['formal_name'], '/') ?>
+					BcBaser->link($this->BcBaser->siteConfig['formal_name'], '/', ['escape' => true]) ?>


BcBaser->link($this->BcBaser->getImg('admin/btn_logo.png', ['alt' => __d('baser', 'baserCMS管理システム'), 'class' => 'bc-btn']), ['plugin' => null, 'admin' => true, 'controller' => 'dashboard', 'action' => 'index'], ['title' => __d('baser', 'baserCMS管理システム')]) ?>

-						BcBaser->link($authName, Configure::read('BcAuthPrefix.' . $currentPrefix . '.loginRedirect'), ['title' => $authName]) ?>
+						BcBaser->link($authName, Configure::read('BcAuthPrefix.' . $currentPrefix . '.loginRedirect'), ['title' => $authName, 'escape' => ture]) ?>


BcBaser->existsEditLink() && !isset($this->request->query['preview'])): ?>
